<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–†–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è —à–ª—è–ø–∞ üé©</title>
<style>
  :root{
    --bg:#0f172a; --card:#111827; --muted:#94a3b8; --accent:#22c55e; --text:#e5e7eb;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
    background: radial-gradient(1200px 700px at 20% -10%, #1f2937, transparent), var(--bg);
    color:var(--text); display:flex; align-items:center; justify-content:center; min-height:100vh; padding:24px;
  }
  .card{
    width:min(760px, 100%); background:linear-gradient(180deg,#0b1220,#0b1220cc), var(--card);
    border:1px solid #1f2937; border-radius:20px; padding:24px; box-shadow:0 10px 40px rgba(0,0,0,.35);
  }
  h1{margin:0 0 6px 0; font-size:28px}
  p{margin:8px 0; color:var(--muted); line-height:1.5}
  .row{display:flex; gap:12px; flex-wrap:wrap; margin-top:12px}
  input[type="text"]{
    flex:1; min-width:220px; padding:12px 14px; border-radius:12px; border:1px solid #1f2937; background:#0b1220; color:var(--text);
  }
  button{
    border:0; padding:12px 16px; border-radius:12px; background:var(--accent); color:#062a12; font-weight:700; cursor:pointer;
    transition:transform .04s ease, filter .2s ease;
  }
  button:disabled{opacity:.5; cursor:not-allowed}
  button:active{transform:translateY(1px)}
  .muted-btn{background:#1f2937; color:#cbd5e1}
  .section{margin-top:18px; padding:16px; border:1px dashed #233047; border-radius:14px}
  .roulette{
    margin-top:10px; font-size:22px; font-weight:700; min-height:32px; letter-spacing:.2px;
    padding:10px 12px; background:#0a1323; border:1px solid #1f2937; border-radius:10px;
    display:flex; align-items:center; justify-content:center;
  }
  .result{font-size:18px; margin-top:8px}
  .hat{ width:48px; height:48px; }
  .hat img{ display:block; width:100%; height:100%; object-fit:contain; filter: drop-shadow(0 2px 4px rgba(0,0,0,.35)); }
  a{color:#86efac; text-decoration:none}
  a:hover{text-decoration:underline}
</style>
</head>
<body>
  <div class="card">
    <div class="hat">
      <img src="./hattpng.png" alt="–†–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è —à–ª—è–ø–∞"
           width="48" height="48"
           loading="lazy"
           onerror="this.replaceWith(document.createTextNode('üé©'))">
    </div>
    <h1>–†–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è —à–ª—è–ø–∞</h1>
    <p>–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ—Å—å:</p>
    <div class="row">
      <input id="nameInput" type="text" placeholder="–ò–º—è" />
      <button id="startBtn">–ù–∞—á–∞—Ç—å</button>
    </div>

    <div id="greet" class="section" style="display:none"></div>

    <div id="dirBlock" class="section" style="display:none">
      <strong>–í—ã–±–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</strong>
      <div class="row" style="margin-top:10px">
        <button id="spinDir">–í—ã–±–µ—Ä–∏ –º–æ—é —Å—É–¥—å–±—É</button>
      </div>
      <div id="dirRoulette" class="roulette"></div>
      <div id="dirResult" class="result"></div>
    </div>

    <div id="progBlock" class="section" style="display:none">
      <strong>–í—ã–±–æ—Ä –ø—Ä–æ–≥—Ä–∞–º–º—ã</strong>
      <div class="row" style="margin-top:10px">
        <button id="spinProg">–ö—Ä—É—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã</button>
      </div>
      <div id="progRoulette" class="roulette"></div>
      <div id="progResult" class="result"></div>
    </div>

    <div id="tutorAsk" class="section" style="display:none">
      <strong>–•–æ—á–µ—à—å, —è —Ä–µ—à—É –∑–∞ —Ç–µ–±—è, –∫—Ç–æ –±—É–¥–µ—Ç —Ç–≤–æ–∏–º –Ω–∞—É—á–Ω–∏–∫–æ–º?</strong>
      <div class="row" style="margin-top:10px">
        <button id="yesTutor">–î–∞</button>
        <button class="muted-btn" id="noTutor">–ù–µ—Ç</button>
      </div>
    </div>

    <div id="tutorBlock" class="section" style="display:none">
      <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç</strong>
      <div id="tutorRoulette" class="roulette"></div>
      <div id="tutorResult" class="result"></div>
    </div>
  </div>

<script src="./newdictma3.js"
  onload="document.getElementById('startBtn').disabled=false; console.log('DATA', Object.keys(window.DATA||{}))"
  onerror="alert('–ù–µ –Ω–∞—à—ë–ª newdictma2.js —Ä—è–¥–æ–º —Å index.html')">
</script>

<script>
const DATA = window.DATA || {};
</script>


<script>


const $ = (id) => document.getElementById(id);
const nameInput = $("nameInput");
const startBtn = $("startBtn");

const greet = $("greet");
const dirBlock = $("dirBlock");
const dirRoulette = $("dirRoulette");
const dirResult = $("dirResult");
const spinDirBtn = $("spinDir");

const progBlock = $("progBlock");
const progRoulette = $("progRoulette");
const progResult = $("progResult");
const spinProgBtn = $("spinProg");

const tutorAsk = $("tutorAsk");
const yesTutor = $("yesTutor");
const noTutor = $("noTutor");

const tutorBlock = $("tutorBlock");
const tutorRoulette = $("tutorRoulette");
const tutorResult = $("tutorResult");

let chosenDir = null;
let chosenProg = null;

function greetText(name){
  return `–ü—Ä–∏–≤–µ—Ç, ${name}! –ü–æ–Ω–∏–º–∞—é, —á—Ç–æ –æ—á–µ–Ω—å —Ç—Ä—É–¥–Ω–æ –≤—ã–±—Ä–∞—Ç—å –º–∞–≥–∏—Å—Ç–µ—Ä—Å–∫—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –ø–æ –¥—É—à–µ: –ø–æ—Å–ª–µ –ø–æ–ª–∏—Ç—Ñ–∞–∫–∞ –≤—Å—ë –∫–∞–∂–µ—Ç—Å—è –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º.
–Ø –∑–Ω–∞—é, —á—Ç–æ —Ç–µ–±–µ –Ω—É–∂–Ω–æ! –û—Ç–¥–∞–π—Å—è —Å—É–¥—å–±–µ –∏ –¥–∞–π –º–Ω–µ —Ä–µ—à–∏—Ç—å –≤—Å—ë –∑–∞ —Ç–µ–±—è. –ü—Ä–æ—Å—Ç–æ –Ω–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É ‚Äî –∏ —è –≤—ã–±–µ—Ä—É –¥–ª—è —Ç–µ–±—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –ø—Ä–æ–≥—Ä–∞–º–º—É.`;
}


function spin(list, outEl, durationMs=1700){
  return new Promise((resolve) => {
    if (!list || list.length === 0){
      outEl.textContent = "–Ω–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤";
      return resolve(null);
    }
    const target = list[Math.floor(Math.random()*list.length)];
    const start = performance.now();
    const tick = () => {
      const elapsed = performance.now() - start;
      const t = Math.min(elapsed / durationMs, 1);

      const stepDelay = 30 + t*t*250; 
      outEl.textContent = list[Math.floor(Math.random()*list.length)];
      if (elapsed >= durationMs){
        outEl.textContent = target;
        resolve(target);
      } else {
        setTimeout(tick, stepDelay);
      }
    };
    tick();
  });
}

startBtn.addEventListener("click", () => {
  const name = (nameInput.value || "").trim();
  const safeName = name || "–¥—Ä—É–≥";
  greet.style.display = "block";
  greet.innerText = greetText(safeName);
  dirBlock.style.display = "block";
  nameInput.disabled = true;
  startBtn.disabled = true;
});


spinDirBtn.addEventListener("click", async () => {
  spinDirBtn.disabled = true;
  dirResult.textContent = "";
  const dirs = Object.keys(DATA);
  chosenDir = await spin(dirs, dirRoulette);
  if (chosenDir){
    dirResult.textContent = `–¢–≤–æ—ë –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: ${chosenDir}`;

    progBlock.style.display = "block";
    spinProgBtn.disabled = false;
  } else {
    dirResult.textContent = "–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–±—Ä–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.";
  }
});


spinProgBtn.addEventListener("click", async () => {
  spinProgBtn.disabled = true;
  progResult.textContent = "";
  const progs = chosenDir ? Object.keys(DATA[chosenDir] || {}) : [];
  chosenProg = await spin(progs, progRoulette);
  if (chosenProg){
    progResult.textContent = `–¢–≤–æ—è –ø—Ä–æ–≥—Ä–∞–º–º–∞: ${chosenProg}`;

    tutorAsk.style.display = "block";
  } else {
    progResult.textContent = "–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–±—Ä–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É.";
  }
});

// –ù–∞—É—á–Ω–∏–∫ ‚Äî ¬´–Ω–µ—Ç¬ª
noTutor.addEventListener("click", () => {
  tutorAsk.style.display = "none";
  tutorBlock.style.display = "block";
  tutorRoulette.textContent = "–ë–µ–∑ –Ω–∞—É—á–Ω–∏–∫–∞ üôÇ";
  tutorResult.textContent = "–í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ ‚Äî —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è!";
});

// –ù–∞—É—á–Ω–∏–∫ ‚Äî ¬´–¥–∞¬ª
yesTutor.addEventListener("click", async () => {
  tutorAsk.style.display = "none";
  tutorBlock.style.display = "block";
  tutorResult.textContent = "";

  const profMap = (DATA[chosenDir] || {})[chosenProg] || {};
  const profs = Object.keys(profMap);
  const picked = await spin(profs, tutorRoulette, 1500);

  if (picked){
    const link = (profMap[picked] || "").toString();
    tutorResult.innerHTML = `–¢–≤–æ–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å ‚Äî <strong>${picked}</strong>. 
      <a href="${link}" target="_blank" rel="noopener noreferrer">–ü–æ–∑–Ω–∞–∫–æ–º—å—Å—è —Å –Ω–∏–º</a>.`;
  } else {
    tutorResult.textContent = "–ù–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å –≤—ã–±—Ä–∞—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è.";
  }
});
</script>
</body>
</html>